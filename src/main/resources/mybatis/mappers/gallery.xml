<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="gallery">

	<!-- 전체리스트 -->
	<select id="selectList" parameterType="com.javaex.vo.GalleryVO" resultType="com.javaex.vo.GalleryVO">
		<![CDATA[
			select   g.no
					,g.content
					,g.filePath
					,g.orgName
					,g.saveName
					,g.fileSize
					,u.no as userNo
					,u.name as userName
			from 	 users u, gallery g
			where  	 u.no = g.user_no
			order by g.no desc
		]]>
	</select>
	
	<!-- 등록 -->
	<insert id="insert" parameterType="com.javaex.vo.GalleryVO">
			<![CDATA[
			insert into gallery(
              					no 
               					,user_no 
               					,content 
               					,filePath 
               					,orgName 
               					,saveName 
               					,fileSize
           	)
			VALUES (
	                null, 
    	            #{userNo} 
        	        ,#{content} 
            	    ,#{filePath} 
                	,#{orgName} 
                	,#{saveName} 
                	,#{fileSize}
            )
			]]>
	</insert>

	<!-- 게시물 1개 정보 조회 (작성자 확인용) -->
	<select id="selectOne" parameterType="int" resultType="com.javaex.vo.GalleryVO">
		select no
			  ,user_no as userNo
              ,content
         	  ,filePath
              ,orgName
              ,saveName
              ,fileSize
		from gallery
		where no = #{no}
	</select>

	<!-- 게시물 삭제 -->
	<delete id="delete" parameterType="int">
		delete from gallery
		where no = #{no}
	</delete>
</mapper>